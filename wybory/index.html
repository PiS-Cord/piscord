<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Wybory</title>
<script src="arkusze.js"></script>
<script src="skrypt_funkcyjny.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body { font-family: Arial; text-align:center; }

input, select {
  padding:8px;
  margin:5px;
}

.candidate {
  padding:10px;
  margin:5px;
  border-radius:6px;
  color:white;
  cursor:pointer;
  display:inline-block;
}
table {
  margin:auto;
  border-collapse: collapse;
  width: 80%;
}
table, th, td {
  border: 1px solid #000;
  padding: 5px;
  text-align:center;
}
</style>
</head>
<body>

<h1>Wybory na najbardziej spedaloną partię w Polsce</h1>

<div>
  <input id="nick" placeholder="Nick Discord">
  <input id="discordId" placeholder="Discord ID">
  <select id="wojewodztwo">
  <option value="dolnośląskie">Dolnośląskie</option>
  <option value="kujawsko-pomorskie">Kujawsko-Pomorskie</option>
  <option value="lubelskie">Lubelskie</option>
  <option value="lubuskie">Lubuskie</option>
  <option value="łódzkie">Łódzkie</option>
  <option value="małopolskie">Małopolskie</option>
  <option value="mazowieckie">Mazowieckie</option>
  <option value="opolskie">Opolskie</option>
  <option value="podkarpackie">Podkarpackie</option>
  <option value="podlaskie">Podlaskie</option>
  <option value="pomorskie">Pomorskie</option>
  <option value="śląskie">Śląskie</option>
  <option value="świętokrzyskie">Świętokrzyskie</option>
  <option value="warmińsko-mazurskie">Warmińsko-Mazurskie</option>
  <option value="wielkopolskie">Wielkopolskie</option>
  <option value="zachodniopomorskie">Zachodniopomorskie</option>
</select>
</div>

<h3>Wybierz kandydata</h3>
<div id="candidates"></div>

<h3>Wyniki ogólnopolskie</h3>
<div style="display: flex; gap: 20px; flex-wrap: wrap; justify-content: center;">
  <div style="width: 400px; height: 400px;">
    <canvas id="pieOgolne"></canvas>
  </div>
  <div style="width: 400px; height: 400px; display: none;" id="barOgolneContainer">
    <canvas id="barOgolne"></canvas>
  </div>
</div>

<button onclick="toggleChart('ogolne')">Zmień na słupkowy / kołowy</button>

<hr>

<h3>Wyniki według województw</h3>
<div style="width: 100%; max-width: 900px; margin: 0 auto;">
  <canvas id="barWojewodztwa"></canvas>
</div>

<button onclick="odswiezWykresy()">Odśwież wykresy</button>
<h2>Edycja arkusza z przeglądarki</h2>

  <label>A1: <input id="inpA1" type="text"></label><br><br>
  <button onclick="zapisz()">Zapisz do A1</button>
  <button onclick="odczytaj()">Odczytaj A1</button>

  <pre id="wynik"></pre>

  <script>
    async function zapisz() {
      const wartosc = document.getElementById("inpA1").value;
      const ok = await setCell("A1", wartosc);
      document.getElementById("wynik").textContent = 
        ok ? "Zapisano pomyślnie ✓" : "Błąd zapisu ✗";
    }

    async function odczytaj() {
      const val = await getCell("A1");
      document.getElementById("inpA1").value = val ?? "";
      document.getElementById("wynik").textContent = 
        val !== null ? "Odczytano ✓" : "Błąd odczytu ✗";
    }
  </script>
</body>
</html>
